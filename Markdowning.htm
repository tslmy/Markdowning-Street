<!DOCTYPE html>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <title>Markdowning Street</title>
    <script type="text/javascript" src="showdown.js"></script>
    <script type="text/javascript" src="showdown-gui.js"></script>
    <script type="text/javascript" src="html2markdown.js"></script>
    <script type="text/javascript" src="htmlparser.js"></script>
    <link rel="stylesheet" href="style.css"></link>
  </head>
  <body>
    <div id="main">
      <textarea id="inputPane" cols="80" rows="20" class="pane">
Markdown Syntax
====
This is a paragraph.
Yes. 
Manual  
line break.

_italics_  **bold**   
___both___ or ***both***

`Code, demostrating images in Markdown: ![picture alt](a.jpg "Title is optional") `

    Code_block();

> Blockquotes are like quoted text in email replies
>> And, they can be nested
	
Links
--------
[tslmy.tk](http://tslmy.tk "optional title")

[t.t.t][]
[t.t.t]:http://the.tslmy.tk  "optional title"

[My Photos](photo)
[photo]:http://my.tslmy.tk "optional title"



# Header 1 #
## Header 2
### Header 3 ####

* * * *

* Bullet list
- Bullet list
+ Bullet list

- - -

1. numbered list
2007. numbered list
      </textarea>
      <textarea id="outputPane" class="pane" cols="80" rows="20"
      style="display: none; height: 412px; ">
      </textarea>
      <div id="previewPane" class="pane" style="display: block; height: 412px; ">
      </div>
      <textarea id="syntaxPane" class="pane" cols="80" rows="20" readonly="readonly"
      style="display: none; height: 412px; ">
Markdown Syntax
====
This is a paragraph.
Yes. 
Manual  
line break.

_italics_  **bold**   
___both___ or ***both***

`Code, demostrating images in Markdown: ![picture alt](a.jpg "Title is optional") `

    Code_block();

> Blockquotes are like quoted text in email replies
>> And, they can be nested
	
Links
--------
[tslmy.tk](http://tslmy.tk "optional title")

[t.t.t][]
[t.t.t]:http://the.tslmy.tk  "optional title"

[My Photos](photo)
[photo]:http://my.tslmy.tk  "optional title"



# Header 1 #
## Header 2
### Header 3 ####

* * * *

* Bullet list
- Bullet list
+ Bullet list

- - -

1. numbered list
2007. numbered list
</textarea>
    </div>
    <div id="footer">
      <span id="convertTextControls">
        [Md
        <button id="reverseConvertButton" type="button" title="Reverse Convertion -- HTML to Markdown">
          &lt;--
        </button>
        <button id="convertTextButton" type="button" title="Convert text now">
          --&gt;
        </button>
		HTML
        <select id="convertTextSetting">
          <option value="delayed">
            in the background
          </option>
          <option value="continuous">
            every keystroke
          </option>
          <option value="manual">
            manually
          </option>
        </select>
        ]
      </span>
      <select id="paneSetting">
        <option value="previewPane">
          Preview
        </option>
        <option value="outputPane">
          HTML Output
        </option>
        <option value="syntaxPane">
          Syntax Guide
        </option>
      </select>
      <div id="processingTime" title="Last processing time">
        Initializing...
      </div>
    </div>
	<script>
	var inputPane = document.getElementById('inputPane'),
	    outputPane=document.getElementById('outputPane');
	document.getElementById('reverseConvertButton').onclick = function () {inputPane.value=HTML2Markdown(outputPane.value);}
	//drag open file functionality
	if (window.FileReader) {
		function handleFileSelect(evt) {
			evt.stopPropagation();
			evt.preventDefault();
			var files = evt.dataTransfer.files;
			for (var i = 0, f; f = files[i]; i++) {
				var reader = new FileReader(),
					img;
				if (f.type=='text/plain') {
					document.getElementById('processingTime').innerHTML = 'Text file "' + f.name.substring(0,8) + '..." opened.';
					reader.onload = function (theFile) {return function (e) {inputPane.innerHTML = e.target.result;};}(f)
					reader.readAsText(f);
				} else {
					document.getElementById('processingTime').innerHTML = '>Not a ".txt" file.';}}}
		function handleDragOver(evt) {
			evt.stopPropagation();
			evt.preventDefault();}
		inputPane.addEventListener('dragover', handleDragOver, false);
		inputPane.addEventListener('drop', handleFileSelect, false);
	} else {
		document.getElementById('processingTime').innerHTML = '>Browser does not support drag upload.';}
	</script>
  </body>
</html>